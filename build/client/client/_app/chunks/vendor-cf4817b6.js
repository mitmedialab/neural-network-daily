function E(){}function Dt(n,t){for(const e in t)n[e]=t[e];return n}function ct(n){return n()}function at(){return Object.create(null)}function T(n){n.forEach(ct)}function It(n){return typeof n=="function"}function Mt(n,t){return n!=n?t==t:n!==t||n&&typeof n=="object"||typeof n=="function"}function $t(n){return Object.keys(n).length===0}function Ft(n,...t){if(n==null)return E;const e=n.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Ke(n,t,e){n.$$.on_destroy.push(Ft(t,e))}function ze(n,t,e,s){if(n){const i=ht(n,t,e,s);return n[0](i)}}function ht(n,t,e,s){return n[1]&&s?Dt(e.ctx.slice(),n[1](s(t))):e.ctx}function Ye(n,t,e,s){if(n[2]&&s){const i=n[2](s(e));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],r=Math.max(t.dirty.length,i.length);for(let c=0;c<r;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function We(n,t,e,s,i,o){if(i){const r=ht(t,e,s,o);n.p(r,i)}}function Je(n){if(n.ctx.length>32){const t=[],e=n.ctx.length/32;for(let s=0;s<e;s++)t[s]=-1;return t}return-1}let P=!1;function Vt(){P=!0}function Ut(){P=!1}function Ht(n,t,e,s){for(;n<t;){const i=n+(t-n>>1);e(i)<=s?n=i+1:t=i}return n}function Kt(n){if(n.hydrate_init)return;n.hydrate_init=!0;let t=n.childNodes;if(n.nodeName==="HEAD"){const a=[];for(let h=0;h<t.length;h++){const l=t[h];l.claim_order!==void 0&&a.push(l)}t=a}const e=new Int32Array(t.length+1),s=new Int32Array(t.length);e[0]=-1;let i=0;for(let a=0;a<t.length;a++){const h=t[a].claim_order,l=(i>0&&t[e[i]].claim_order<=h?i+1:Ht(1,i,m=>t[e[m]].claim_order,h))-1;s[a]=e[l]+1;const f=l+1;e[f]=a,i=Math.max(f,i)}const o=[],r=[];let c=t.length-1;for(let a=e[i]+1;a!=0;a=s[a-1]){for(o.push(t[a-1]);c>=a;c--)r.push(t[c]);c--}for(;c>=0;c--)r.push(t[c]);o.reverse(),r.sort((a,h)=>a.claim_order-h.claim_order);for(let a=0,h=0;a<r.length;a++){for(;h<o.length&&r[a].claim_order>=o[h].claim_order;)h++;const l=h<o.length?o[h]:null;n.insertBefore(r[a],l)}}function zt(n,t){if(P){for(Kt(n),(n.actual_end_child===void 0||n.actual_end_child!==null&&n.actual_end_child.parentElement!==n)&&(n.actual_end_child=n.firstChild);n.actual_end_child!==null&&n.actual_end_child.claim_order===void 0;)n.actual_end_child=n.actual_end_child.nextSibling;t!==n.actual_end_child?(t.claim_order!==void 0||t.parentNode!==n)&&n.insertBefore(t,n.actual_end_child):n.actual_end_child=t.nextSibling}else(t.parentNode!==n||t.nextSibling!==null)&&n.appendChild(t)}function Xe(n,t,e){P&&!e?zt(n,t):(t.parentNode!==n||t.nextSibling!=e)&&n.insertBefore(t,e||null)}function Yt(n){n.parentNode.removeChild(n)}function je(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function Wt(n){return document.createElement(n)}function K(n){return document.createTextNode(n)}function Qe(){return K(" ")}function Ge(){return K("")}function Ze(n,t,e,s){return n.addEventListener(t,e,s),()=>n.removeEventListener(t,e,s)}function tn(n,t,e){e==null?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function Jt(n){return Array.from(n.childNodes)}function Xt(n){n.claim_info===void 0&&(n.claim_info={last_index:0,total_claimed:0})}function ut(n,t,e,s,i=!1){Xt(n);const o=(()=>{for(let r=n.claim_info.last_index;r<n.length;r++){const c=n[r];if(t(c)){const a=e(c);return a===void 0?n.splice(r,1):n[r]=a,i||(n.claim_info.last_index=r),c}}for(let r=n.claim_info.last_index-1;r>=0;r--){const c=n[r];if(t(c)){const a=e(c);return a===void 0?n.splice(r,1):n[r]=a,i?a===void 0&&n.claim_info.last_index--:n.claim_info.last_index=r,c}}return s()})();return o.claim_order=n.claim_info.total_claimed,n.claim_info.total_claimed+=1,o}function jt(n,t,e,s){return ut(n,i=>i.nodeName===t,i=>{const o=[];for(let r=0;r<i.attributes.length;r++){const c=i.attributes[r];e[c.name]||o.push(c.name)}o.forEach(r=>i.removeAttribute(r))},()=>s(t))}function en(n,t,e){return jt(n,t,e,Wt)}function Qt(n,t){return ut(n,e=>e.nodeType===3,e=>{const s=""+t;if(e.data.startsWith(s)){if(e.data.length!==s.length)return e.splitText(s.length)}else e.data=s},()=>K(t),!0)}function nn(n){return Qt(n," ")}function sn(n,t){t=""+t,n.wholeText!==t&&(n.data=t)}function rn(n,t,e,s){e===null?n.style.removeProperty(t):n.style.setProperty(t,e,s?"important":"")}function on(n,t,e){n.classList[e?"add":"remove"](t)}let C;function R(n){C=n}function q(){if(!C)throw new Error("Function called outside component initialization");return C}function cn(n){q().$$.on_mount.push(n)}function an(n){q().$$.after_update.push(n)}function hn(n,t){q().$$.context.set(n,t)}function un(n){return q().$$.context.get(n)}const N=[],ft=[],D=[],lt=[],dt=Promise.resolve();let z=!1;function pt(){z||(z=!0,dt.then(mt))}function fn(){return pt(),dt}function Y(n){D.push(n)}const W=new Set;let I=0;function mt(){const n=C;do{for(;I<N.length;){const t=N[I];I++,R(t),Gt(t.$$)}for(R(null),N.length=0,I=0;ft.length;)ft.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];W.has(e)||(W.add(e),e())}D.length=0}while(N.length);for(;lt.length;)lt.pop()();z=!1,W.clear(),R(n)}function Gt(n){if(n.fragment!==null){n.update(),T(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(Y)}}const M=new Set;let v;function ln(){v={r:0,c:[],p:v}}function dn(){v.r||T(v.c),v=v.p}function Zt(n,t){n&&n.i&&(M.delete(n),n.i(t))}function pn(n,t,e,s){if(n&&n.o){if(M.has(n))return;M.add(n),v.c.push(()=>{M.delete(n),s&&(e&&n.d(1),s())}),n.o(t)}}function mn(n,t){const e={},s={},i={$$scope:1};let o=n.length;for(;o--;){const r=n[o],c=t[o];if(c){for(const a in r)a in c||(s[a]=1);for(const a in c)i[a]||(e[a]=c[a],i[a]=1);n[o]=c}else for(const a in r)i[a]=1}for(const r in s)r in e||(e[r]=void 0);return e}function yn(n){return typeof n=="object"&&n!==null?n:{}}function gn(n){n&&n.c()}function _n(n,t){n&&n.l(t)}function te(n,t,e,s){const{fragment:i,on_mount:o,on_destroy:r,after_update:c}=n.$$;i&&i.m(t,e),s||Y(()=>{const a=o.map(ct).filter(It);r?r.push(...a):T(a),n.$$.on_mount=[]}),c.forEach(Y)}function ee(n,t){const e=n.$$;e.fragment!==null&&(T(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function ne(n,t){n.$$.dirty[0]===-1&&(N.push(n),pt(),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function bn(n,t,e,s,i,o,r,c=[-1]){const a=C;R(n);const h=n.$$={fragment:null,ctx:null,props:o,update:E,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:at(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};r&&r(h.root);let l=!1;if(h.ctx=e?e(n,t.props||{},(f,m,...rt)=>{const ot=rt.length?rt[0]:m;return h.ctx&&i(h.ctx[f],h.ctx[f]=ot)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](ot),l&&ne(n,f)),m}):[],h.update(),l=!0,T(h.before_update),h.fragment=s?s(h.ctx):!1,t.target){if(t.hydrate){Vt();const f=Jt(t.target);h.fragment&&h.fragment.l(f),f.forEach(Yt)}else h.fragment&&h.fragment.c();t.intro&&Zt(n.$$.fragment),te(n,t.target,t.anchor,t.customElement),Ut(),mt()}R(a)}class wn{$destroy(){ee(this,1),this.$destroy=E}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const i=s.indexOf(e);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!$t(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const k=[];function vn(n,t){return{subscribe:se(n,t).subscribe}}function se(n,t=E){let e;const s=new Set;function i(c){if(Mt(n,c)&&(n=c,e)){const a=!k.length;for(const h of s)h[1](),k.push(h,n);if(a){for(let h=0;h<k.length;h+=2)k[h][0](k[h+1]);k.length=0}}}function o(c){i(c(n))}function r(c,a=E){const h=[c,a];return s.add(h),s.size===1&&(e=t(i)||E),c(n),()=>{s.delete(h),s.size===0&&(e(),e=null)}}return{set:i,update:o,subscribe:r}}var ie=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,re=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],J=function(t){var e=t,s=t.indexOf("["),i=t.indexOf("]");s!=-1&&i!=-1&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));for(var o=ie.exec(t||""),r={},c=14;c--;)r[re[c]]=o[c]||"";return s!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=oe(r,r.path),r.queryKey=ce(r,r.query),r};function oe(n,t){var e=/\/{2,9}/g,s=t.replace(e,"/").split("/");return(t.substr(0,1)=="/"||t.length===0)&&s.splice(0,1),t.substr(t.length-1,1)=="/"&&s.splice(s.length-1,1),s}function ce(n,t){var e={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,o){i&&(e[i]=o)}),e}function ae(n,t="",e){let s=n;e=e||typeof location!="undefined"&&location,n==null&&(n=e.protocol+"//"+e.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=e.protocol+n:n=e.host+n),/^(https?|wss?):\/\//.test(n)||(typeof e!="undefined"?n=e.protocol+"//"+n:n="https://"+n),s=J(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+t,s.href=s.protocol+"://"+o+(e&&e.port===s.port?"":":"+s.port),s}var X={exports:{}};try{X.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{X.exports=!1}var he=X.exports,b=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function yt(n){const t=n.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!t||he))return new XMLHttpRequest}catch{}if(!t)try{return new b[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function gt(n,...t){return t.reduce((e,s)=>(n.hasOwnProperty(s)&&(e[s]=n[s]),e),{})}const ue=setTimeout,fe=clearTimeout;function $(n,t){t.useNativeTimers?(n.setTimeoutFn=ue.bind(b),n.clearTimeoutFn=fe.bind(b)):(n.setTimeoutFn=setTimeout.bind(b),n.clearTimeoutFn=clearTimeout.bind(b))}var A=d;function d(n){if(n)return le(n)}function le(n){for(var t in d.prototype)n[t]=d.prototype[t];return n}d.prototype.on=d.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};d.prototype.once=function(n,t){function e(){this.off(n,e),t.apply(this,arguments)}return e.fn=t,this.on(n,e),this};d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(n,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var e=this._callbacks["$"+n];if(!e)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<e.length;i++)if(s=e[i],s===t||s.fn===t){e.splice(i,1);break}return e.length===0&&delete this._callbacks["$"+n],this};d.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),e=this._callbacks["$"+n],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(e){e=e.slice(0);for(var s=0,i=e.length;s<i;++s)e[s].apply(this,t)}return this};d.prototype.emitReserved=d.prototype.emit;d.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};d.prototype.hasListeners=function(n){return!!this.listeners(n).length};const y=Object.create(null);y.open="0";y.close="1";y.ping="2";y.pong="3";y.message="4";y.upgrade="5";y.noop="6";const F=Object.create(null);Object.keys(y).forEach(n=>{F[y[n]]=n});const de={type:"error",data:"parser error"},pe=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",me=typeof ArrayBuffer=="function",ye=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,_t=({type:n,data:t},e,s)=>pe&&t instanceof Blob?e?s(t):bt(t,s):me&&(t instanceof ArrayBuffer||ye(t))?e?s(t):bt(new Blob([t]),s):s(y[n]+(t||"")),bt=(n,t)=>{const e=new FileReader;return e.onload=function(){const s=e.result.split(",")[1];t("b"+s)},e.readAsDataURL(n)};var wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(var V=0;V<wt.length;V++)B[wt.charCodeAt(V)]=V;var ge=function(n){var t=n.length*.75,e=n.length,s,i=0,o,r,c,a;n[n.length-1]==="="&&(t--,n[n.length-2]==="="&&t--);var h=new ArrayBuffer(t),l=new Uint8Array(h);for(s=0;s<e;s+=4)o=B[n.charCodeAt(s)],r=B[n.charCodeAt(s+1)],c=B[n.charCodeAt(s+2)],a=B[n.charCodeAt(s+3)],l[i++]=o<<2|r>>4,l[i++]=(r&15)<<4|c>>2,l[i++]=(c&3)<<6|a&63;return h};const _e=typeof ArrayBuffer=="function",vt=(n,t)=>{if(typeof n!="string")return{type:"message",data:Et(n,t)};const e=n.charAt(0);return e==="b"?{type:"message",data:be(n.substring(1),t)}:F[e]?n.length>1?{type:F[e],data:n.substring(1)}:{type:F[e]}:de},be=(n,t)=>{if(_e){const e=ge(n);return Et(e,t)}else return{base64:!0,data:n}},Et=(n,t)=>{switch(t){case"blob":return n instanceof ArrayBuffer?new Blob([n]):n;case"arraybuffer":default:return n}},kt=String.fromCharCode(30),we=(n,t)=>{const e=n.length,s=new Array(e);let i=0;n.forEach((o,r)=>{_t(o,!1,c=>{s[r]=c,++i===e&&t(s.join(kt))})})},ve=(n,t)=>{const e=n.split(kt),s=[];for(let i=0;i<e.length;i++){const o=vt(e[i],t);if(s.push(o),o.type==="error")break}return s},At=4;class xt extends A{constructor(t){super();this.writable=!1,$(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const s=new Error(t);return s.type="TransportError",s.description=e,super.emit("error",s),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=vt(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}var Tt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),U=64,Ct={},Rt=0,w=0,Nt;function j(n){var t="";do t=Tt[n%U]+t,n=Math.floor(n/U);while(n>0);return t}function Ee(n){var t=0;for(w=0;w<n.length;w++)t=t*U+Ct[n.charAt(w)];return t}function Q(){var n=j(+new Date);return n!==Nt?(Rt=0,Nt=n):n+"."+j(Rt++)}for(;w<U;w++)Ct[Tt[w]]=w;Q.encode=j;Q.decode=Ee;var Bt=Q,S={};S.encode=function(n){var t="";for(var e in n)n.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(n[e]));return t};S.decode=function(n){for(var t={},e=n.split("&"),s=0,i=e.length;s<i;s++){var o=e[s].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t};class ke extends xt{constructor(){super(...arguments);this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||e()})),this.writable||(s++,this.once("drain",function(){--s||e()}))}else e()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){const e=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose(),!1;this.onPacket(s)};ve(t,this.socket.binaryType).forEach(e),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,we(t,e=>{this.doWrite(e,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=Bt()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&(e==="https"&&Number(this.opts.port)!==443||e==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const i=S.encode(t),o=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(i.length?"?"+i:"")}}function Ae(){}const xe=function(){return new yt({xdomain:!1}).responseType!=null}();class Te extends ke{constructor(t){super(t);if(typeof location!="undefined"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location!="undefined"&&t.hostname!==location.hostname||i!==t.port,this.xs=t.secure!==s}const e=t&&t.forceBase64;this.supportsBinary=xe&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new g(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",i=>{this.onError("xhr post error",i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",e=>{this.onError("xhr poll error",e)}),this.pollXhr=t}}class g extends A{constructor(t,e){super();$(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=e.async!==!1,this.data=e.data!==void 0?e.data:null,this.create()}create(){const t=gt(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new yt(t);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&e.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{e.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{e.readyState===4&&(e.status===200||e.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document!="undefined"&&(this.index=g.requestsCount++,g.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=Ae,t)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete g.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;t!==null&&this.onData(t)}abort(){this.cleanup()}}g.requestsCount=0;g.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",St);else if(typeof addEventListener=="function"){const n="onpagehide"in b?"pagehide":"unload";addEventListener(n,St,!1)}}function St(){for(let n in g.requests)g.requests.hasOwnProperty(n)&&g.requests[n].abort()}const Ce=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,e)=>e(t,0))(),O=b.WebSocket||b.MozWebSocket,Ot=!0,Re="arraybuffer",Lt=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class G extends xt{constructor(t){super(t);this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=Lt?{}:gt(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Ot&&!Lt?e?new O(t,e):new O(t):new O(t,e,s)}catch(i){return this.emit("error",i)}this.ws.binaryType=this.socket.binaryType||Re,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;_t(s,this.supportsBinary,o=>{const r={};try{Ot&&this.ws.send(o)}catch{}i&&Ce(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(e==="wss"&&Number(this.opts.port)!==443||e==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Bt()),this.supportsBinary||(t.b64=1);const i=S.encode(t),o=this.opts.hostname.indexOf(":")!==-1;return e+"://"+(o?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(i.length?"?"+i:"")}check(){return!!O&&!("__initialize"in O&&this.name===G.prototype.name)}}const Ne={websocket:G,polling:Te};class _ extends A{constructor(t,e={}){super();t&&typeof t=="object"&&(e=t,t=null),t?(t=J(t),e.hostname=t.host,e.secure=t.protocol==="https"||t.protocol==="wss",e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=J(e.host).host),$(this,e),this.secure=e.secure!=null?e.secure:typeof location!="undefined"&&location.protocol==="https:",e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=e.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=S.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=Be(this.opts.query);e.EIO=At,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Ne[t](s)}open(){let t;if(this.opts.rememberUpgrade&&_.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(t){let e=this.createTransport(t),s=!1;_.priorWebsocketSuccess=!1;const i=()=>{s||(e.send([{type:"ping",data:"probe"}]),e.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;_.priorWebsocketSuccess=e.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(l(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=e.name,this.emitReserved("upgradeError",m)}}))};function o(){s||(s=!0,l(),e.close(),e=null)}const r=f=>{const m=new Error("probe error: "+f);m.transport=e.name,o(),this.emitReserved("upgradeError",m)};function c(){r("transport closed")}function a(){r("socket closed")}function h(f){e&&f.name!==e.name&&o()}const l=()=>{e.removeListener("open",i),e.removeListener("error",r),e.removeListener("close",c),this.off("close",a),this.off("upgrading",h)};e.once("open",i),e.once("error",r),e.once("close",c),this.once("close",a),this.once("upgrading",h),e.open()}onOpen(){if(this.readyState="open",_.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,i){if(typeof e=="function"&&(i=e,e=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:t,data:e,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}onError(t){_.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const i=t.length;for(;s<i;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}_.protocol=At;function Be(n){const t={};for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}_.protocol;const Se=typeof ArrayBuffer=="function",Oe=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,Pt=Object.prototype.toString,Le=typeof Blob=="function"||typeof Blob!="undefined"&&Pt.call(Blob)==="[object BlobConstructor]",Pe=typeof File=="function"||typeof File!="undefined"&&Pt.call(File)==="[object FileConstructor]";function Z(n){return Se&&(n instanceof ArrayBuffer||Oe(n))||Le&&n instanceof Blob||Pe&&n instanceof File}function H(n,t){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let e=0,s=n.length;e<s;e++)if(H(n[e]))return!0;return!1}if(Z(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return H(n.toJSON(),!0);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&H(n[e]))return!0;return!1}function qe(n){const t=[],e=n.data,s=n;return s.data=tt(e,t),s.attachments=t.length,{packet:s,buffers:t}}function tt(n,t){if(!n)return n;if(Z(n)){const e={_placeholder:!0,num:t.length};return t.push(n),e}else if(Array.isArray(n)){const e=new Array(n.length);for(let s=0;s<n.length;s++)e[s]=tt(n[s],t);return e}else if(typeof n=="object"&&!(n instanceof Date)){const e={};for(const s in n)n.hasOwnProperty(s)&&(e[s]=tt(n[s],t));return e}return n}function De(n,t){return n.data=et(n.data,t),n.attachments=void 0,n}function et(n,t){if(!n)return n;if(n&&n._placeholder)return t[n.num];if(Array.isArray(n))for(let e=0;e<n.length;e++)n[e]=et(n[e],t);else if(typeof n=="object")for(const e in n)n.hasOwnProperty(e)&&(n[e]=et(n[e],t));return n}const Ie=5;var u;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(u||(u={}));class Me{encode(t){return(t.type===u.EVENT||t.type===u.ACK)&&H(t)?(t.type=t.type===u.EVENT?u.BINARY_EVENT:u.BINARY_ACK,this.encodeAsBinary(t)):[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return(t.type===u.BINARY_EVENT||t.type===u.BINARY_ACK)&&(e+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(e+=t.nsp+","),t.id!=null&&(e+=t.id),t.data!=null&&(e+=JSON.stringify(t.data)),e}encodeAsBinary(t){const e=qe(t),s=this.encodeAsString(e.packet),i=e.buffers;return i.unshift(s),i}}class nt extends A{constructor(){super()}add(t){let e;if(typeof t=="string")e=this.decodeString(t),e.type===u.BINARY_EVENT||e.type===u.BINARY_ACK?(this.reconstructor=new Fe(e),e.attachments===0&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else if(Z(t)||t.base64)if(this.reconstructor)e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(u[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===u.BINARY_EVENT||s.type===u.BINARY_ACK){const o=e+1;for(;t.charAt(++e)!=="-"&&e!=t.length;);const r=t.substring(o,e);if(r!=Number(r)||t.charAt(e)!=="-")throw new Error("Illegal attachments");s.attachments=Number(r)}if(t.charAt(e+1)==="/"){const o=e+1;for(;++e&&!(t.charAt(e)===","||e===t.length););s.nsp=t.substring(o,e)}else s.nsp="/";const i=t.charAt(e+1);if(i!==""&&Number(i)==i){const o=e+1;for(;++e;){const r=t.charAt(e);if(r==null||Number(r)!=r){--e;break}if(e===t.length)break}s.id=Number(t.substring(o,e+1))}if(t.charAt(++e)){const o=$e(t.substr(e));if(nt.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}static isPayloadValid(t,e){switch(t){case u.CONNECT:return typeof e=="object";case u.DISCONNECT:return e===void 0;case u.CONNECT_ERROR:return typeof e=="string"||typeof e=="object";case u.EVENT:case u.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case u.ACK:case u.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function $e(n){try{return JSON.parse(n)}catch{return!1}}class Fe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const e=De(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",protocol:Ie,get PacketType(){return u},Encoder:Me,Decoder:nt});function p(n,t,e){return n.on(t,e),function(){n.off(t,e)}}const Ue=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qt extends A{constructor(t,e,s){super();this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[p(t,"open",this.onopen.bind(this)),p(t,"packet",this.onpacket.bind(this)),p(t,"error",this.onerror.bind(this)),p(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Ue.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const s={type:u.EVENT,data:e};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof e[e.length-1]=="function"){const r=this.ids++,c=e.pop();this._registerAckCallback(r,c),s.id=r}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?this.packet(s):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){const s=this.flags.timeout;if(s===void 0){this.acks[t]=e;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===t&&this.sendBuffer.splice(o,1);e.call(this,new Error("operation has timed out"))},s);this.acks[t]=(...o)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...o])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this.packet({type:u.CONNECT,data:t})}):this.packet({type:u.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case u.CONNECT:if(t.data&&t.data.sid){const i=t.data.sid;this.onconnect(i)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case u.EVENT:this.onevent(t);break;case u.BINARY_EVENT:this.onevent(t);break;case u.ACK:this.onack(t);break;case u.BINARY_ACK:this.onack(t);break;case u.DISCONNECT:this.ondisconnect();break;case u.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const e=t.data||[];t.id!=null&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:u.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];typeof e=="function"&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:u.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var He=x;function x(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}x.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*n);n=(Math.floor(t*10)&1)==0?n-e:n+e}return Math.min(n,this.max)|0};x.prototype.reset=function(){this.attempts=0};x.prototype.setMin=function(n){this.ms=n};x.prototype.setMax=function(n){this.max=n};x.prototype.setJitter=function(n){this.jitter=n};class st extends A{constructor(t,e){var s;super();this.nsps={},this.subs=[],t&&typeof t=="object"&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.opts=e,$(this,e),this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor((s=e.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new He({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(e.timeout==null?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||Ve;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=e.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(e=this.backoff)===null||e===void 0||e.setMin(t),this)}randomizationFactor(t){var e;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(e=this.backoff)===null||e===void 0||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(e=this.backoff)===null||e===void 0||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new _(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=p(e,"open",function(){s.onopen(),t&&t()}),o=p(e,"error",r=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",r),t?t(r):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const r=this._timeout;r===0&&i();const c=this.setTimeoutFn(()=>{i(),e.close(),e.emit("error",new Error("timeout"))},r);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(p(t,"ping",this.onping.bind(this)),p(t,"data",this.ondata.bind(this)),p(t,"error",this.onerror.bind(this)),p(t,"close",this.onclose.bind(this)),p(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new qt(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const L={};function it(n,t){typeof n=="object"&&(t=n,n=void 0),t=t||{};const e=ae(n,t.path||"/socket.io"),s=e.source,i=e.id,o=e.path,r=L[i]&&o in L[i].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||r;let a;return c?a=new st(s,t):(L[i]||(L[i]=new st(s,t)),a=L[i]),e.query&&!t.query&&(t.query=e.queryKey),a.socket(e.path,t)}Object.assign(it,{Manager:st,Socket:qt,io:it,connect:it});export{yn as A,ee as B,Dt as C,se as D,fn as E,ze as F,We as G,Je as H,Ye as I,zt as J,E as K,Ze as L,Ke as M,vn as N,it as O,un as P,on as Q,je as R,wn as S,ft as T,Jt as a,tn as b,en as c,Yt as d,Wt as e,rn as f,Xe as g,Qt as h,bn as i,sn as j,Qe as k,Ge as l,nn as m,ln as n,pn as o,dn as p,Zt as q,hn as r,Mt as s,K as t,an as u,cn as v,gn as w,_n as x,te as y,mn as z};
