import{L as D,M as tt,S as N,i as P,s as O,t as k,e as w,h as T,c as y,a as v,d as _,g as d,J as E,N as $,K as p,O as A,D as H,k as F,m as J,b as U,P as I,Q as K,v as Q,R as et,T as X,U as ot,V as nt,W as rt,l as Y,X as st,q as R,o as C,n as ct,p as it,w as L,x as M,y as q,B as V,Y as lt,Z as ut,_ as at}from"../chunks/vendor-212bf475.js";import{r as ft}from"../chunks/singletons-4a680913.js";async function ht(c,t=100){let e=setTimeout(()=>null,0);for(;!c();)await new Promise(o=>{clearTimeout(e),e=setTimeout(o,t)});clearTimeout(e)}function _t(c,t){const e=c.indexOf(t);return e>-1&&c.splice(e,1),c}function pt(c,t,e=1){const o=Array.from({length:t},(n,s)=>s*e+c);let r=0;return{[Symbol.iterator](){return this},next(){const n={value:o[r],done:r>=t};return r++,n}}}class B{static FromExisting(t){return new B(t)}static Connect(t){const e=t&&t.url?D(t.url):D(),o=new B(e);return t&&t.onConnect&&o.on("connect",t.onConnect),o}constructor(t){this.subscriptions=new Map,this.socket=t}close(){this.socket.close()}subscribe(t,e){var o;return this.subscriptions.has(t)?((o=this.subscriptions.get(t))==null||o.push(e),!1):(this.subscriptions.set(t,[e]),!0)}unsubscribe(t,e){const o=this.subscriptions.get(t);o&&_t(o,e)}on(t,e){const o=t,r=()=>{var n;return`Passed in function (${(n=e.name)!=null?n:"anonymous"}) does not match signature for ${t}`};switch(o){case"connect":if(!this.checkType(e))throw new Error(r());return this.subscribe(t,e)&&this.socket.on("connect",()=>{var n;(n=this.subscriptions.get(t))==null||n.forEach(s=>s())}),!0;case"start":if(!this.checkType(e))throw new Error(r());return this.subscribe(t,e)&&this.socket.on("start",()=>{var n;(n=this.subscriptions.get(t))==null||n.forEach(s=>s())}),!0;case"update":if(!this.checkType(e))throw new Error(r());return this.subscribe(t,e)&&this.socket.on("update",n=>{var s;(s=this.subscriptions.get(t))==null||s.forEach(f=>f(n))}),!0;case"prediction":if(!this.checkType(e))throw new Error(r());return this.subscribe(t,e)&&this.socket.on("prediction",n=>{var s;(s=this.subscriptions.get(t))==null||s.forEach(f=>f(n))}),!0}}send(t,e){const o=t,r=()=>`Passed in parameters (${Object.keys(e)}) does not match signature for ${t}`;switch(o){case"joinRoom":{const n=e;if(n===null)throw new Error(r());return this.socket.emit("joinRoom",...n),!0}case"startRoom":{const n=e;if(n===null)throw new Error(r());return this.socket.emit("startRoom",...n),!0}case"checkRoom":{const n=e;if(n===null)throw new Error(r());return this.socket.emit("checkRoom",...n),!0}case"propogate":{const n=e;if(n===null)throw new Error(r());return this.socket.emit("propogate",...n),!0}case"testing_getRoomCounts":{const n=e;if(n===null)throw new Error(r());return this.socket.emit("testing_getRoomCounts",...n),!0}}}checkType(t){return t!==null}}let Z=!0;const mt=async()=>ht(()=>Z),z=tt(B.Connect({onConnect:()=>Z=!0}));function dt(c){let t,e,o,r,n,s,f,a;return{c(){t=k(`Are you a
`),e=w("button"),o=k("Teacher"),r=k(`
or a
`),n=w("button"),s=k("Student")},l(u){t=T(u,`Are you a
`),e=y(u,"BUTTON",{});var m=v(e);o=T(m,"Teacher"),m.forEach(_),r=T(u,`
or a
`),n=y(u,"BUTTON",{});var i=v(n);s=T(i,"Student"),i.forEach(_)},m(u,m){d(u,t,m),d(u,e,m),E(e,o),d(u,r,m),d(u,n,m),E(n,s),f||(a=[$(e,"click",c[1]),$(n,"click",c[2])],f=!0)},p,i:p,o:p,d(u){u&&_(t),u&&_(e),u&&_(r),u&&_(n),f=!1,A(a)}}}var S;(function(c){c[c.Undecided=0]="Undecided",c[c.Teacher=1]="Teacher",c[c.Student=2]="Student"})(S||(S={}));function bt(c,t,e){let{role:o}=t;const r=()=>e(0,o=S.Teacher),n=()=>e(0,o=S.Student);return c.$$set=s=>{"role"in s&&e(0,o=s.role)},[o,r,n]}class kt extends N{constructor(t){super();P(this,t,bt,dt,O,{role:0})}}const wt=ft,G=Tt;async function Tt(c,t){return wt.goto(c,t,[])}const yt=H(),gt=H();function vt(c){let t,e,o,r,n,s,f,a,u,m;return{c(){t=k(`Name:
`),e=w("input"),o=k(`
Room:
`),r=w("input"),n=F(),s=w("button"),f=k("Join"),this.h()},l(i){t=T(i,`Name:
`),e=y(i,"INPUT",{placeholder:!0}),o=T(i,`
Room:
`),r=y(i,"INPUT",{placeholder:!0}),n=J(i),s=y(i,"BUTTON",{});var l=v(s);f=T(l,"Join"),l.forEach(_),this.h()},h(){U(e,"placeholder","name"),U(r,"placeholder","room"),s.disabled=a=!c[2]},m(i,l){d(i,t,l),d(i,e,l),I(e,c[0]),d(i,o,l),d(i,r,l),I(r,c[1]),d(i,n,l),d(i,s,l),E(s,f),u||(m=[$(e,"input",c[7]),$(r,"input",c[8]),$(r,"input",c[3]),$(s,"click",c[4])],u=!0)},p(i,[l]){l&1&&e.value!==i[0]&&I(e,i[0]),l&2&&r.value!==i[1]&&I(r,i[1]),l&4&&a!==(a=!i[2])&&(s.disabled=a)},i:p,o:p,d(i){i&&_(t),i&&_(e),i&&_(o),i&&_(r),i&&_(n),i&&_(s),u=!1,A(m)}}}function $t(c,t,e){let o;K(c,z,h=>e(9,o=h));let{id:r=""}=t,n,s,f;const a=h=>{o.send("checkRoom",[h,g=>{e(6,s=g)}])},u=h=>{const g=h.currentTarget.value;a(g)},m=()=>{gt.set(f),yt.set(n),G(`${n}`)};let i=!1;Q(()=>a(r));function l(){f=this.value,e(0,f)}function b(){n=this.value,e(1,n)}return c.$$set=h=>{"id"in h&&e(5,r=h.id)},c.$$.update=()=>{c.$$.dirty&65&&e(2,i=f&&s)},[f,n,i,u,m,r,s,l,b]}class Et extends N{constructor(t){super();P(this,t,$t,vt,O,{id:5})}}function W(c,t,e){const o=c.slice();return o[1]=t[e],o}function x(c){let t,e=c[1]+"",o,r;return{c(){t=w("option"),o=k(e),this.h()},l(n){t=y(n,"OPTION",{});var s=v(t);o=T(s,e),s.forEach(_),this.h()},h(){t.__value=r=c[1],t.value=t.__value},m(n,s){d(n,t,s),E(t,o)},p,d(n){n&&_(t)}}}function Rt(c){let t,e,o,r,n,s,f,a,u,m=c[2],i=[];for(let l=0;l<m.length;l+=1)i[l]=x(W(c,m,l));return{c(){t=w("label"),e=k("Capacity:"),o=F(),r=w("select");for(let l=0;l<i.length;l+=1)i[l].c();n=F(),s=w("button"),f=k("Start Room"),this.h()},l(l){t=y(l,"LABEL",{for:!0});var b=v(t);e=T(b,"Capacity:"),b.forEach(_),o=J(l),r=y(l,"SELECT",{id:!0});var h=v(r);for(let j=0;j<i.length;j+=1)i[j].l(h);h.forEach(_),n=J(l),s=y(l,"BUTTON",{});var g=v(s);f=T(g,"Start Room"),g.forEach(_),this.h()},h(){U(t,"for","capacity"),U(r,"id","capacity"),c[1]===void 0&&et(()=>c[4].call(r))},m(l,b){d(l,t,b),E(t,e),d(l,o,b),d(l,r,b);for(let h=0;h<i.length;h+=1)i[h].m(r,null);X(r,c[1]),d(l,n,b),d(l,s,b),E(s,f),a||(u=[$(r,"change",c[4]),$(s,"click",c[5])],a=!0)},p(l,[b]){if(b&4){m=l[2];let h;for(h=0;h<m.length;h+=1){const g=W(l,m,h);i[h]?i[h].p(g,b):(i[h]=x(g),i[h].c(),i[h].m(r,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=m.length}b&6&&X(r,l[1])},i:p,o:p,d(l){l&&_(t),l&&_(o),l&&_(r),ot(i,l),l&&_(n),l&&_(s),a=!1,A(u)}}}function Ct(c,t,e){let o;K(c,z,u=>e(0,o=u));let r;const n=Array.from(pt(6,7)),s=u=>{G(u)};function f(){r=nt(this),e(1,r),e(2,n)}return[o,r,n,s,f,()=>o.send("startRoom",[r,s])]}class St extends N{constructor(t){super();P(this,t,Ct,Rt,O,{})}}function Nt(c){return{c:p,l:p,m:p,p,i:p,o:p,d:p}}function Pt(c){let t,e,o,r;const n=[It,Ut,Ot],s=[];function f(a,u){return a[0]?a[0]===S.Teacher?1:a[0]===S.Student?2:-1:0}return~(e=f(c))&&(o=s[e]=n[e](c)),{c(){t=w("h1"),o&&o.c()},l(a){t=y(a,"H1",{});var u=v(t);o&&o.l(u),u.forEach(_)},m(a,u){d(a,t,u),~e&&s[e].m(t,null),r=!0},p(a,u){let m=e;e=f(a),e===m?~e&&s[e].p(a,u):(o&&(ct(),C(s[m],1,1,()=>{s[m]=null}),it()),~e?(o=s[e],o?o.p(a,u):(o=s[e]=n[e](a),o.c()),R(o,1),o.m(t,null)):o=null)},i(a){r||(R(o),r=!0)},o(a){C(o),r=!1},d(a){a&&_(t),~e&&s[e].d()}}}function Ot(c){let t,e;return t=new Et({}),{c(){L(t.$$.fragment)},l(o){M(t.$$.fragment,o)},m(o,r){q(t,o,r),e=!0},p,i(o){e||(R(t.$$.fragment,o),e=!0)},o(o){C(t.$$.fragment,o),e=!1},d(o){V(t,o)}}}function Ut(c){let t,e;return t=new St({}),{c(){L(t.$$.fragment)},l(o){M(t.$$.fragment,o)},m(o,r){q(t,o,r),e=!0},p,i(o){e||(R(t.$$.fragment,o),e=!0)},o(o){C(t.$$.fragment,o),e=!1},d(o){V(t,o)}}}function It(c){let t,e,o;function r(s){c[1](s)}let n={};return c[0]!==void 0&&(n.role=c[0]),t=new kt({props:n}),lt.push(()=>ut(t,"role",r)),{c(){L(t.$$.fragment)},l(s){M(t.$$.fragment,s)},m(s,f){q(t,s,f),o=!0},p(s,f){const a={};!e&&f&1&&(e=!0,a.role=s[0],at(()=>e=!1)),t.$set(a)},i(s){o||(R(t.$$.fragment,s),o=!0)},o(s){C(t.$$.fragment,s),o=!1},d(s){V(t,s)}}}function Bt(c){return{c:p,l:p,m:p,p,i:p,o:p,d:p}}function jt(c){let t,e,o={ctx:c,current:null,token:null,hasCatch:!1,pending:Bt,then:Pt,catch:Nt,value:2,blocks:[,,,]};return rt(mt(),o),{c(){t=Y(),o.block.c()},l(r){t=Y(),o.block.l(r)},m(r,n){d(r,t,n),o.block.m(r,o.anchor=n),o.mount=()=>t.parentNode,o.anchor=t,e=!0},p(r,[n]){c=r,st(o,c,n)},i(r){e||(R(o.block),e=!0)},o(r){for(let n=0;n<3;n+=1){const s=o.blocks[n];C(s)}e=!1},d(r){r&&_(t),o.block.d(r),o.token=null,o=null}}}function At(c,t,e){Q(()=>{});let o;function r(n){o=n,e(0,o)}return[o,r]}class Lt extends N{constructor(t){super();P(this,t,At,jt,O,{})}}export{Lt as default};
