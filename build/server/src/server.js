import express from 'express';
import https from 'https';
import http from 'http';
// @ts-ignore -- This will be generated by SvelteKit later
import { handler } from '../../client/handler';
// add .js extension so it can be located after compiling typescript
import { setUpLiveReloadForDevelopment } from './utils/liveReloader';
import process from './shared/common/processUtils';
import establishSocketServer from './shared/sockets/socketManagement';
const app = express();
const server = process.env.NODE_ENV === 'dev' ? new http.Server(app) : new https.Server(app);
const port = (process.env.PORT === undefined) ? 3000 : process.env.PORT;
server.listen(port);
setUpLiveReloadForDevelopment(app);
establishSocketServer(server);
app.use(handler);
//# sourceMappingURL=server.js.map